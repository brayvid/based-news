<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Title set to your preference -->
  <title>Based News | Blake Rayvid</title>

  <!-- Your existing description -->
  <meta name="description" content="A tunable news digest, curated hourly by Google's Gemini AI. Get unbiased, up-to-the-minute headlines on the topics that matter most to you.">
  
  <!-- =================================================================== -->
  <!-- SEO: Core Metadata Additions                                        -->
  <!-- =================================================================== -->
  <!-- The definitive URL for this page -->
  <link rel="canonical" href="https://news.blakerayvid.com" />
  <!-- Optional: Create a favicon and uncomment this line -->
  <!-- <link rel="icon" href="/favicon.ico" sizes="any"> -->

  <!-- =================================================================== -->
  <!-- SEO: Open Graph / Social Sharing Tags (Facebook, LinkedIn, etc.)    -->
  <!-- =================================================================== -->
  <meta property="og:title" content="Based News | Blake Rayvid" />
  <meta property="og:description" content="A tunable news digest, curated hourly by Google's Gemini AI. Get unbiased, up-to-the-minute headlines on the topics that matter most to you." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://news.blakerayvid.com" />
  <meta property="og:site_name" content="Based News" />
  <!-- IMPORTANT: For this to work, create a 1200x630px image named "social-share-image.png" and place it in your site's root directory. -->
  <meta property="og:image" content="https://news.blakerayvid.com/images/example.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- =================================================================== -->
  <!-- SEO: Twitter Card Tags                                              -->
  <!-- =================================================================== -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Based News | Blake Rayvid" />
  <meta name="twitter:description" content="A tunable news digest, curated hourly by Google's Gemini AI. Get unbiased, up-to-the-minute headlines on the topics that matter most to you." />
  <!-- Twitter uses the same image as Open Graph. -->
  <meta name="twitter:image" content="https://news.blakerayvid.com/images/example.png" />
  
  <!-- =================================================================== -->
  <!-- SEO: Structured Data (JSON-LD) for Richer Search Results            -->
  <!-- =================================================================== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Based News",
    "url": "https://news.blakerayvid.com",
    "description": "A tunable news digest, curated hourly by Google's Gemini AI.",
    "publisher": {
      "@type": "Person",
      "name": "Blake Rayvid"
    }
  }
  </script>

  <!-- Your existing styles and font links are unchanged -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    body {
  margin: 0;
  font-family: 'Open Sans', sans-serif;
  background-color: #f4f4f4;
  color: #333;
  line-height: 1.6;
}

.container {
  width: 90%;
  max-width: 800px;
  margin: 0 auto;
  padding-top: 4px;
}


header {
  background-color: #1a1a1a;
  color: #fff;
  padding: 1.5em 0;
  text-align: center;
}

header h1 {
  margin: 0;
  font-family: 'Merriweather', serif;
  font-size: 2.5em;
}

.subheading {
  margin-top: 0.5em;
  font-size: 1.1em;
  color: #ccc;
}

main {
  background: #fff;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  margin-top: 2em;
  padding: 2em 1.6em;
}

/* --- Digest Pagination Styles --- */
.digest-pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px; /* Gap between arrows and dots container */
  margin-bottom: 1em;
  margin-top: 0.8em;
  user-select: none;
}

.arrow-btn {
  background-color: transparent;
  border: none;
  color: #555;
  font-size: 18px;
  cursor: pointer;
  padding: 5px;
  line-height: 1;
  transition: color 0.2s;
}

.arrow-btn:hover:not(:disabled) {
  color: #000;
}

.arrow-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

#dots-container {
  display: flex;
  align-items: center;
  gap: 12px;
}

.dot {
  width: 10px;
  height: 10px;
  background-color: #ccc;
  border-radius: 50%;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.2s;
  flex-shrink: 0;
}

.dot:hover {
  background-color: #aaa;
}

.dot.active {
  background-color: #003366;
  transform: scale(1.2);
}

.digest-timestamp {
    font-family: 'Merriweather', serif;
    font-size: 1.1em;
    text-align: center;
    color: #444;
    margin-bottom: 1em;
    border-bottom: 1px solid #eee;
    padding-bottom: 0.5em;
}

/* --- Slider Styles --- */
#digest-slider-wrapper {
  overflow: hidden;
  position: relative;
  width: 100%;
  transition: height 0.25s ease-in-out; /* Smooth height transition */
  min-height: 80px; /*  ADD THIS LINE */
}

#digest-slider {
  display: flex;
  transition: transform 0.4s ease-in-out;
  align-items: flex-start; 
}

.digest-slide {
  width: 100%;
  flex-shrink: 0;
  box-sizing: border-box;
}

/* ADD THIS ENTIRE RULE */
#world-summary {
  min-height: 300px; /* Or a height that reflects your typical summary length */
}

/* General Section Styles */
section h3 {
  font-family: 'Merriweather', serif;
  border-bottom: 2px solid #ddd;
  padding-bottom: 0.3em;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

section p {
  margin: 0.5em 0 1em 0;
  /* KEY FIX: This will wrap long words/URLs correctly without breaking normal words. */
  word-break: break-word;
}

section a {
  color: #003366;
  text-decoration: none;
  font-weight: 600;
  /* KEY FIX: Applying the same wrapping rule to links. */
  word-break: break-word; 
}

section a:hover {
  text-decoration: underline;
}

footer {
  text-align: center;
  font-size: 0.9em;
  color: #666;
  padding: 2em 0;
}

a {
  color: #003366;
  text-decoration: none;
  font-weight: 600;
  transition: color 0.2s ease, text-decoration 0.2s ease;
}

a:hover,
a:focus {
  color: #d33c2d;
  text-decoration: underline;
}

.summary-heading {
  font-family: 'Merriweather', serif;
  font-size: 1.3em;
  border-bottom: 2px solid #ddd;
  padding-bottom: 0.3em;
  margin-top: 2em;
  margin-bottom: 1em;
}

p.timestamp {
  font-size: 0.85em !important;
  color: #888;
}

@media (max-width: 600px) {
  header h1 { font-size: 1.8em; }
  .subheading { font-size: 0.95em; }
  main { padding: 1em; }
  section h3 { font-size: 1.0em; }
  a { font-size: 0.95em; }
  .digest-timestamp { font-size: 1em; }
  .arrow-btn { font-size: 32px; }
  #dots-container { gap: 10px; }
  .dot { width: 9px; height: 9px; }
}

@media (hover: none) and (pointer: coarse) {
  a:hover,
  a:focus {
    color: #003366;
    text-decoration: none;
  }
}
  </style> 
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@400;600&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@400;600&display=swap"></noscript>
</head>
<body>
  <header>
    <div class="container header-bar">
      <div class="title-group">
        <h1>Based News Reader</h1>
        <p class="subheading">Curated with Gemini, updated hourly.</p>
      </div>
      <div class="header-right-placeholder"></div>
    </div>
  </header>

  <main class="container">
    <section id="digest-container">
      <div class="digest-pagination">
        <button id="older-btn" class="arrow-btn" disabled title="Older Digest">◄</button>
        <div id="dots-container"></div>
        <button id="newer-btn" class="arrow-btn" disabled title="Newer Digest">►</button>
      </div>
       <p id="digest-timestamp-header" class="digest-timestamp">Loading...</p>
      <div id="digest-slider-wrapper">
        <div id="digest-slider">
          <!-- Slides will be injected here by JS in reverse chronological order -->
           <div class="digest-slide" id="digest-slide-0">
              <h3>NASA</h3>
<p><a href="https://news.google.com/rss/articles/CBMixwFBVV95cUxNQ1QzUE8xWGZRRFVFc2kwaXlwQWNRa3FBUWQxUFVobi0wX2lOSkQ1SzVYYjhxQVB6Rm1ibEZkYlBMNk5IMG01b1NreWs0cGYtbzR3YllSQWJoWkQxZzBLeVFXVWhqZThaa3BuN1RCNUN1anduTFlFTkVIQkdzeFJtWjI3SGdLeXpiaU9EdkVKVVozVnFlV0REbXZ5WjE0enUxY3JjTnBYbzNIdmdtcHQ1SjNXYUJ2LTlMSGNXTjRoTTg2ejdQM3pF?oc=5" target="_blank">NASA losing nearly 4,000 employees to Trump administration&#x27;s &#x27;deferred resignation&#x27; program - Space</a><br><small>Sat, 26 Jul 2025 12:26 AM EDT</small></p>
<h3>US Foreign Policy</h3>
<p><a href="https://news.google.com/rss/articles/CBMisgFBVV95cUxNMDh1eVU1emF6YTVwMFpwdmtrZGFYdzZZS3ZxM0F0aUJGTG85SllKU2JULTBrdG5GVTI3emhsRnFZM1pUZ3pfc1F0aVBmeUdZeExOMDJTUGxoQjNyUDdQbTg3VzNfTS1WWGdiLUtManZGaG43T2tIT3pkY19pN2tTcUpTYjRlWGstaUt6Mk5qeDNDcElOYlFPaVdvbHJHazd6Z1VCMnk3b3F6TEhDZkNqcFpn0gG3AUFVX3lxTFB2OWxCU1gyeW9vdEZnQzJIU1kwT0RFUTY4R0NZR0ZYTm0xSXEwWHJXd0NNd1drdjRjS09Kemc2YmZHa3czUHNnalk2Z1NFUUk3Mzl1RnVoVWFwcmtvOXMyUXc5b0RSbndJNUlPWXVfRy1rR2dBNDY0MGRheGZ4ajA3RFo4cFBxM0trN2lGMnd6a0g5Uy11QjVTZHo3WWo1cExjVEliTnJHUWFOVnRsMFViYWE1WUhJQQ?oc=5" target="_blank">US confirms it will destroy contraceptives previously designated as aid - Al Jazeera</a><br><small>Fri, 25 Jul 2025 04:03 PM EDT</small></p>
<h3>Ukraine</h3>
<p><a href="https://news.google.com/rss/articles/CBMirAFBVV95cUxNUDdoVXlpMlAwVlRjU0tsUXFhc2E2S2JmbGhWckVjeng4bFA5TUlwWnlsLXJKMHVINkZjZHA1S2VkWE51X3hSS05LQkdoa1JmQzl4Y1F2b0VwMUtINDN6RjN2bFU1N3ZSV1BWZDA4S0lwT1h5T3J0M2xFcDRMci1ud25RZzBkOXpKU1lNYk1XdFNXc21icURCRWFCeElxTS1OR282LWNmY1ZSdm5M?oc=5" target="_blank">Putin may be miscalculating Trump’s resolve on Ukraine - Atlantic Council</a><br><small>Fri, 25 Jul 2025 06:53 PM EDT</small></p>
<h3>Gaza</h3>
<p><a href="https://news.google.com/rss/articles/CBMitAFBVV95cUxQWTRmSXRxOWhMbjRremNqNTdMNnNLRVBRS0Q4RHNhTGZQZTVXX0JGTV9CXzFCS0Yya2kwdktJOHRnVHVuLWRPaVltV0JNUWE1ZndtTmtGdEF6RzhCME9oX0hnZlJDUUVnRFNlUGlveUtJYXdZQnVtRFNaM2xOTHNaeXUtTlN4OVZOemljWmhiUWxjMHREX2pRRmRSeHRlMkxRZEh6d3NaY3JPZjNrR0JTWGFqWUfSAboBQVVfeXFMUFp3VU56alhDeTdkbTVkYkhuakd3QXhIQ0hYRVFrdl8tQzZPdTlUQTd6S3JuRmZvVS1KNjFpR0tFd0UtRnlKT0d1SFpJTHF1cVlnSUxyU2NBWmFQaExWcjhXdVNUSGhIT2haWTV6QmtqSERBOGg3Xy1pOEVxd0czd21sTUhpajRTLXVXcjZYWlJzd1FVVUtMazZUcWlqOFg3WnZGMmdzQmNsY0lYemgwOWt6OGRkdHhkeUV3?oc=5" target="_blank">Hundreds bang pots, pans in London in Gaza hunger crisis protest - Al Jazeera</a><br><small>Fri, 25 Jul 2025 04:15 PM EDT</small></p>
<h3>US Politics</h3>
<p><a href="https://news.google.com/rss/articles/CBMiogNBVV95cUxNNU9xRXZlLWxyeGgwZFBCR21uLUxFNG1kVkJkZ1RJMHNXTVp2TVVjcHRibDY5V2dvWXh2SHRwdDJINWpXWkk0QlE2b0Y0SHRxSnFCSXhDNkdSWndxTHZrRW1nQ2labGtJckZPWHBNa0o4Z1VkbWl2ZEMtV1RIZ3ZObjhPV09FNHBNTUxXZ1p0b25YZURwMjNKaC1TTFN5WU9DRTMxNjNuQ1lIR3hvMFhCanB1VGhfbUlQQ2dGclZ0cnIwa3ByMzd2eGNzbXExX1NtTF9uaUF0QWtzc3h5ellMb1o5Y3UzU3REX083RGdsT3lYQVVtZkwzZ3UybXVYRW5OQ01MTmlyTzBUMXlOS0RQeEFCbEFhREJwLThZb0ZTTXhXVjZXSFFITUlfaWRoZ3RHOTFjcHU0Z2FTdVNjYm5BTmJsMkRqLWpqTExWRm4yWmFjMTF0YU05QzBuUVRyT1dFM0t0NDFuT2RqckEtQWVqa3ZUV3BIdmg4OW9GOHRfVHNDdFNNdWtEZDN3SFVkWE9PWVZrTHU1R2sxbTdpX2RFZTV3?oc=5" target="_blank">Exclusive | Democrats Get Lowest Rating From Voters in 35 Years, WSJ Poll Finds - The Wall Street Journal</a><br><small>Fri, 25 Jul 2025 09:00 PM EDT</small></p>
<h3>Technology</h3>
<p><a href="https://news.google.com/rss/articles/CBMitAFBVV95cUxPSmQ0SC1YT291QzRxbnhNRldIZm9BZkNoUmZ0NFJmam1aTlgyMlpBOG1yazBCTnNmQTF4Wmdta0lJcWdDeFFRU0ZYZW9XdGpDbFh4N1FqZGh0dHpCOHZZWXBlWk1QOGp1eUlsUk96Y2luYjZNamhkbHlVZ21LZGhqcUk4aVRUZHdxWUhaWW5lWUxpaHM0eE5GZnJ2eUJ0MGJZN3k5V2NxMjVQWklBcXRRSFEzQWM?oc=5" target="_blank">Meta Clashes With Apple, Google Over Child Age Check Legislation - Bloomberg.com</a><br><small>Fri, 25 Jul 2025 03:53 PM EDT</small></p>
<h3>Ancient History</h3>
<p><a href="https://news.google.com/rss/articles/CBMi3AFBVV95cUxOZTktbUMyWUFVTkQ3c2FiNVNnSVpHVV9wQVN1blJXNUJBaHFCYUpwYVNMMmVkSG9lVkJJRXo1azg3dXROcEhDVnNCd0lKdndxbmhyaVJKWm5jWEhIWXlHNGsya3dPNENQVFBkYVJIRzhTejNpRzNXOHB4a1lsVW1YdXJib050RklFZ2dzSUhXdHlMT2MzRkVKY2RQTUJ4cG9zU05BazFXWFl4cDVEbVVtYmJkRnRSd0ExbnlkZHE2NkVSYjlMT3Ayb1M4NTd4T3J1TFQ0bHFtY19MQVpi?oc=5" target="_blank">Scientists trace Indigenous history on ancient river for climate change analysis - MSN</a><br><small>Fri, 25 Jul 2025 11:31 PM EDT</small></p>

          </div>
        </div>
      </div>
    </section>

    <section id="world-summary">
    <!-- summary.html will be injected here -->
  </section>
  </main>

  <footer>
    <div class="container">
      <p><a href="https://docs.google.com/spreadsheets/d/1OjpsQEnrNwcXEWYuPskGRA5Jf-U8e_x0x3j2CKJualg/edit?usp=sharing">Settings</a> | <a href="https://github.com/brayvid/based-news">GitHub</a> | <a href="https://blakerayvid.com">Portfolio</a></p>
    </div>
  </footer>

  <!-- Your scripts are unchanged -->
  <script defer>
    document.addEventListener("DOMContentLoaded", function () {
      const digestSliderWrapper = document.getElementById("digest-slider-wrapper");
      const digestSlider = document.getElementById("digest-slider");
      const olderBtn = document.getElementById("older-btn");
      const newerBtn = document.getElementById("newer-btn");
      const dotsContainer = document.getElementById("dots-container");
      const timestampHeader = document.getElementById("digest-timestamp-header");
      const summarySection = document.getElementById("world-summary");

      let manifest = [];
      // currentIndex is the LOGICAL index: 0 is newest, 1 is next newest, etc.
      let currentIndex = 0; 
      let totalItems = 0;
      let touchStartX = 0;
      let touchEndX = 0;
      const swipeThreshold = 50; 

      function updateNavControls() {
        olderBtn.disabled = currentIndex >= totalItems - 1; // At the oldest
        newerBtn.disabled = currentIndex <= 0;             // At the newest
        
        const dots = document.querySelectorAll('.dot');
        dots.forEach((dot) => {
          const dotIndex = parseInt(dot.dataset.logicalIndex);
          dot.classList.toggle('active', dotIndex === currentIndex);
        });
      }

      function updateTimestampHeader() {
        const entry = manifest[currentIndex];
        if (!entry) return;

        // Create a new date object from the timestamp
        const date = new Date(entry.timestamp);
        
        // Round to the nearest hour. Add 30 minutes to handle rounding up/down,
        // then zero out minutes, seconds, and milliseconds.
        date.setMinutes(date.getMinutes() + 30);
        date.setMinutes(0);
        date.setSeconds(0);
        date.setMilliseconds(0);

        // Format the rounded date for display.
        const options = { weekday: 'long', month: 'long', day: 'numeric', hour: 'numeric', timeZoneName: 'short' };
        timestampHeader.textContent = date.toLocaleString(undefined, options);
      }
      
      function adjustWrapperHeight(slide) {
        if (slide) {
          requestAnimationFrame(() => {
            digestSliderWrapper.style.height = `${slide.offsetHeight}px`;
          });
        }
      }

      async function showDigest(index) {
          if (index < 0 || index >= totalItems) return;
          
          currentIndex = index;
          const slideId = `digest-slide-${index}`;
          const slide = document.getElementById(slideId);

          if (!slide) {
              console.error(`Slide container for index ${index} not found!`);
              return;
          }

          // Lazy-load content if the slide is empty
          if (slide.children.length === 0) {
              await loadDigestContent(index, slide);
          }
          
          // Convert logical index to visual index for CSS transform
          const visualIndex = (totalItems - 1) - currentIndex;
          digestSlider.style.transform = `translateX(-${visualIndex * 100}%)`;
          
          updateNavControls();
          updateTimestampHeader();
      }

      async function loadDigestContent(index, slideElement) {
        // CORRECTED: Direct mapping from index to manifest entry
        const entry = manifest[index]; 
        if (!entry || !entry.file) return;

        try {
            const response = await fetch(entry.file);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const html = await response.text();
            slideElement.innerHTML = html;
            if (index === currentIndex) {
                adjustWrapperHeight(slideElement);
            }
        } catch (error) {
            slideElement.innerHTML = "<p>Unable to load this digest.</p>";
            console.error(`Could not load content for index ${index}:`, error);
        }
      }
      
      function handleSwipe() {
        const deltaX = touchEndX - touchStartX;
        if (Math.abs(deltaX) > swipeThreshold) {
            if (deltaX < 0) { // Swipe Left: Go Newer
                if (currentIndex > 0) showDigest(currentIndex - 1);
            } else { // Swipe Right: Go Older
                if (currentIndex < totalItems - 1) showDigest(currentIndex + 1);
            }
        }
      }

      // --- EVENT LISTENERS ---
      digestSlider.addEventListener('transitionend', () => {
          adjustWrapperHeight(document.getElementById(`digest-slide-${currentIndex}`));
      });
      digestSliderWrapper.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
      digestSliderWrapper.addEventListener('touchend', e => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); });
      window.addEventListener('resize', () => adjustWrapperHeight(document.getElementById(`digest-slide-${currentIndex}`)));

      // --- INITIALIZATION ---
      async function initializeSite() {
          try {
              const manifestRes = await fetch("digest-manifest.json");
              if (!manifestRes.ok) throw new Error("Manifest not found");
              
              manifest = await manifestRes.json();
              // CORRECTED: Total items is now the exact length of the manifest
              totalItems = manifest.length; 
              
              if(totalItems === 0) {
                throw new Error("Manifest is empty. No digests to show.");
              }

              digestSlider.innerHTML = '';
              dotsContainer.innerHTML = '';

              // Create slides and dots in visual order: Oldest (left) to Newest (right)
              for (let visualIndex = 0; visualIndex < totalItems; visualIndex++) {
                  const logicalIndex = (totalItems - 1) - visualIndex;

                  const slide = document.createElement('div');
                  slide.className = 'digest-slide';
                  slide.id = `digest-slide-${logicalIndex}`;
                  digestSlider.appendChild(slide);

                  const dot = document.createElement('div');
                  dot.className = 'dot';
                  dot.dataset.logicalIndex = logicalIndex;
                  dot.onclick = () => showDigest(logicalIndex);
                  
                  // CORRECTED: Get title info directly from manifest
                  const entry = manifest[logicalIndex];
                  const date = new Date(entry.timestamp);
                  dot.title = `Digest from ${date.toLocaleDateString(undefined, { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' })}`;
                  dotsContainer.appendChild(dot); 
              }
              
              olderBtn.onclick = () => { if (currentIndex < totalItems - 1) showDigest(currentIndex + 1); };
              newerBtn.onclick = () => { if (currentIndex > 0) showDigest(currentIndex - 1); };
              
              // Start by showing the latest digest (logical index 0).
              // The showDigest function will automatically trigger content loading.
              await showDigest(0);

          } catch (error) {
              console.error("Initialization failed:", error);
              timestampHeader.textContent = "Could not load headlines";
          }

          fetch("summary.html")
            .then(res => res.text())
            .then(html => {
              const summaryDoc = new DOMParser().parseFromString(html, "text/html");
              summarySection.innerHTML = `<h2 class="summary-heading">Week in Review</h2>${summaryDoc.body.innerHTML}`;
              const lastUpdated = summaryDoc.getElementById("summary-last-updated");
              if (lastUpdated) {
                const stamp = document.createElement("p");
                stamp.className = "timestamp";
                stamp.style.fontSize = "0.9em";
                stamp.style.color = "#666";
                stamp.style.marginTop = "0.5em";
                stamp.textContent = lastUpdated.textContent;
                stamp.style.textAlign = "center";
                document.getElementById("world-summary").appendChild(stamp);
              }
            })
            .catch(() => {
              summarySection.innerHTML = "<p>Unable to load summary.</p>";
            });
      }
      
      initializeSite();
    });
  </script>
<!-- At the end of your index.html <body> -->
<script>
    function loadGtag() {
        const script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-8LC9EF8GSD';
        document.head.appendChild(script);

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-8LC9EF8GSD');
    }

    // Load gtag after 3 seconds or on first scroll, whichever comes first
    const timer = setTimeout(loadGtag, 3000);
    window.addEventListener('scroll', () => {
        clearTimeout(timer);
        loadGtag();
    }, { once: true });
</script>
</body>
</html>